import{Q as k}from"./ButtonWithTooltip.vue_vue_type_script_setup_true_lang-DXByFzTW.js";import{ak as I,v as b,w as C,al as N,am as E,an as F,a as x,r as q,ao as M,f as R,F as V,y as L,q as O,B as $,s as U,C as S,u as T,m as W,I as j}from"./index-biZAYMy_.js";import{i18n as B}from"./i18n--eaCvEqZ.js";function D(e){return N()?(E(e),!0):!1}const g=typeof window!="undefined"&&typeof document!="undefined";typeof WorkerGlobalScope!="undefined"&&globalThis instanceof WorkerGlobalScope;function G(e,n=1e3,i={}){const{immediate:o=!0,immediateCallback:t=!1}=i;let r=null;const a=I(!1);function c(){r&&(clearInterval(r),r=null)}function f(){a.value=!1,c()}function s(){const m=F(n);m<=0||(a.value=!0,t&&e(),c(),a.value&&(r=setInterval(e,m)))}if(o&&g&&s(),b(n)||typeof n=="function"){const m=C(n,()=>{a.value&&g&&s()});D(m)}return D(f),{isActive:a,pause:f,resume:s}}const Q=g?window:void 0;function P(e,n={}){const{immediate:i=!0,fpsLimit:o=void 0,window:t=Q,once:r=!1}=n,a=I(!1),c=x(()=>o?1e3/F(o):null);let f=0,s=null;function m(p){if(!a.value||!t)return;f||(f=p);const y=p-f;if(c.value&&y<c.value){s=t.requestAnimationFrame(m);return}if(f=p,e({delta:y,timestamp:p}),r){a.value=!1,s=null;return}s=t.requestAnimationFrame(m)}function d(){!a.value&&t&&(a.value=!0,f=0,s=t.requestAnimationFrame(m))}function v(){a.value=!1,s!=null&&t&&(t.cancelAnimationFrame(s),s=null)}return i&&d(),D(v),{isActive:M(a),pause:v,resume:d}}function Y(e={}){const{controls:n=!1,interval:i="requestAnimationFrame"}=e,o=q(new Date),t=()=>o.value=new Date,r=i==="requestAnimationFrame"?P(t,{immediate:!0}):G(t,i,{immediate:!0});return n?{now:o,...r}:o}const z=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],H={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,n)=>e===1?n?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,n)=>e===1?n?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,n)=>e===1?n?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,n)=>e===1?n?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function J(e){return e.toISOString().slice(0,10)}function K(e,n={}){const{controls:i=!1,updateInterval:o=3e4}=n,{now:t,...r}=Y({interval:o,controls:!0}),a=x(()=>X(new Date(F(e)),n,F(t)));return i?{timeAgo:a,...r}:a}function X(e,n={},i=Date.now()){var o;const{max:t,messages:r=H,fullDateFormatter:a=J,units:c=z,showSecond:f=!1,rounding:s="round"}=n,m=typeof s=="number"?u=>+u.toFixed(s):Math[s],d=+i-+e,v=Math.abs(d);function p(u,l){return m(Math.abs(u)/l.value)}function y(u,l){const h=p(u,l),w=u>0,_=A(l.name,h,w);return A(w?"past":"future",_,w)}function A(u,l,h){const w=r[u];return typeof w=="function"?w(l,h):w.replace("{0}",l.toString())}if(v<6e4&&!f)return r.justNow;if(typeof t=="number"&&v>t)return a(new Date(e));if(typeof t=="string"){const u=(o=c.find(l=>l.name===t))==null?void 0:o.max;if(u&&v>u)return a(new Date(e))}for(const[u,l]of c.entries()){if(p(d,l)<=0&&c[u-1])return y(d,c[u-1]);if(v<l.max)return y(d,l)}return r.invalid}const ne=R({__name:"DateComponent",props:{date:{},offset:{}},setup(e){const n=e,{date:i,offset:o}=V(n),t=x(()=>1e3*(o.value?i.value+o.value:i.value)),r=x(()=>t.value===0?"never":K(t.value).value),a=x(()=>t.value===0?"never":B.global.d(t.value,"long"));return(c,f)=>(O(),L(j,null,[$(S(T(r))+" ",1),U(k,{delay:500},{default:W(()=>[$(S(T(a)),1)]),_:1})],64))}});export{ne as _};

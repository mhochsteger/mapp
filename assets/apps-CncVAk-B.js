import{d as u}from"./pinia-Cz-fGEgD.js";import{m as f}from"./marked.esm-CrmhQBcZ.js";import{u as m,R as d,W as v,O as A}from"./auth-JCbPQ19o.js";import{u as w}from"./websocket-DMgNuOHa.js";import"./axios-Bf-I0BKU.js";import{r as _,w as h}from"./index-biZAYMy_.js";const S=m(),E=0,I=5,W=10,k=20,i=9e3,x={0:"Hidden",5:"Visible",10:"Trial",20:"Standard",9e3:"Admin"},H=u("apps",()=>{const a=_(null),c=w();async function l(e=!1){!e&&a.value!==null||await navigator.locks.request("webapp_init_apps",async()=>{if(!e&&a.value!==null)return;let s={};s=await(await fetch(window.__webapp_router_base+"get_available_applications")).json();const t={};for(const n in s){const o=s[n];o.description?o.text=f(o.description,{mangle:!1,headerIds:!1}):o.text="",t[o.id]=o}a.value=t})}async function r(){await l(!0)}async function p(){r()}return c.onmessage(r,"apps"),c.onmessage(p,"reload_app"),c.onreconnect(r),h(()=>S.isAuthenticated,e=>{e&&a.value===null&&l()}),{apps:a,load:l,hasAccess:(e,s)=>{if(a.value==null||!(e in a.value))return!1;const t=a.value[e].access_level;let n=!0;return s&d&&n&&(n=t>=I),s&v&&n&&(n=t>=i),s&A&&n&&(n=t>=i),s&i&&n&&(n=t>=i),n}}});export{i as A,E as H,k as S,W as T,I as V,x as a,H as u};
